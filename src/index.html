<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Soothsayer</title>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
    <link rel="import" href="pages/hots.html" name="hots">
    <link rel="import" href="pages/smash.html" name="smash">

    <script>window.$ = window.jQuery = require('jquery');</script>

    <script src="semantic/dist/semantic.min.js"></script>
    <script src="main.js"></script>
  </head>
  <body id="caster-tool">
    <div class="ui fixed inverted compact main menu">
      <div class="ui dropdown icon item" id="game-select-menu">
        <i class="game icon"></i>
        <div class="text">Game</div>
        <div class="menu">
          <div class="item" data-value="hots">Heroes of the Storm</div>
          <div class="item" data-value="smash">Super Smash Bros Ultimate</div>
        </div>
      </div>
      <a class="item menu-opt" id="main-settings-button">
        <i class="wrench icon"></i>
        Settings
      </a>
      <a class="active item menu-opt" id="main-operate-button">
        <i class="film icon"></i>
        Operate
      </a>
      <div class="item" id="update-status">
      </div>
      <div class="right menu">
        <a class="green active item" id="update-button">
          UPDATE
        </a>
      </div>
    </div>
    <div class="ui bottom attached segment" id="operate-mode">

    </div>
    <div class="ui bottom attached segment" id="config-mode">
      <div class="ui secondary pointing menu" id="status-tab-menu">
        <a class="active item" data-tab="status-config">Config</a>
        <a class="item" data-tab="theme-override">Theme Overrides</a>
        <a class="item" data-tab="status-keybinds">Keybinds</a>
        <a class="item" data-tab="status-overlays">Active Overlays</a>
      </div>
      <div class="contained basic segment ui active tab" data-tab="status-config">
        <div class="ui segment">
          <h2 class="ui dividing header">Soothsayer v<span class="app-version"></span></h2>
          <p>
            Soothsayer is maintained by Falindrith on <a href="https://github.com/ebshimizu/hots-caster-tool">GitHub</a>.
            Questions, comments, feature requests,
            help with theming questions, etc. should all be directed to the Project Page on there.
          </p>
          <p>Like the app? There's a tip jar over at Ko-Fi:</p>
          <div class="ui grid">
            <div class="four wide column">
              <a href='https://ko-fi.com/E1E2KHZ3' target='_blank'><img height='36' style='border:0px;height:36px;' src='https://az743702.vo.msecnd.net/cdn/kofi2.png?v=0' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a>
            </div>
            <div class="six wide column">
              <div class="ui fluid button dev-tools-button">Click This If Error (Dev Tools)</div>
            </div>
            <div class="six wide column">
              <div class="ui fluid button obs-src-button">Open Overlay Location</div>
            </div>
            <!--<div class="six wide column">
              <div class="ui fluid button bg-dev-tools-button">Click This If Parser Error (BG Dev Tools)</div>
            </div>-->
          </div>
        </div>
        <div class="ui segment">
          <h2 class="ui dividing header">App Settings</h2>
          <div class="ui form">
            <div class="four wide field">
              <label>Confirm On Exit</label>
              <div class="ui fluid button" id="confirm-on-exit">Off</div>
            </div>
          </div>
        </div>
        <div class="ui segment">
          <h2 class="ui dividing header">Theme</h2>
          <div class="ui info message">
            <div class="content">
              <p>
                You can (and should) use themes to customize the look of the overlays generated by this tool.
                Themes should be placed in a separate folder <em>on the same disk</em> as the Soothsayer application.
                You must tell the app where to find the themes before they will appear in the dropdown menu.
              </p>
              <p>You must click the "Set Theme" button in order to change the theme.</p>
            </div>
          </div>
          <form class="ui form">
            <div class="field">
              <label>Set Theme Folder</label>
              <div class="ui action input">
                <input type="text" disabled name="theme-location" id="theme-location">
                <div class="ui blue right labeled icon button" id="theme-location-browse">
                  <i class="folder open icon"></i>
                  Browse
                </div>
              </div>
            </div>
            <div class="fields">
              <div class="ten wide field">
                <label>Active Theme</label>
                <div class="ui fluid selection dropdown" id="theme-menu">
                  <i class="dropdown icon"></i>
                  <div class="default text">Default Theme</div>
                  <div class="menu">
                    <!-- filled in dynamically -->
                  </div>
                </div>
              </div>
              <div class="three wide field">
                <label>Download Theme</label>
                <div class="ui fluid button" id="download-theme-button">Download</div>
              </div>
              <div class="three wide field">
                <label>Scan For Themes</label>
                <div class="ui fluid button" id="rescan-themes">Scan</div>
              </div>
              <div class="three wide field">
                <label>Set Theme</label>
                <div class="ui fluid green button set-theme-button" id="set-theme">Set</div>
              </div>
            </div>
          </form>
          <div id="theme-info">

          </div>
        </div>
        <div class="ui segment">
          <h2 class="ui dividing header">Data Grabber</h2>
          <div class="ui info message" id="data-grabber-info">
            <div class="content">
              <p>
                Data Grabbers will help automatically populate some of your team and match data from
                the given source. You may need to configure your source once selected.
              </p>
            </div>
          </div>
          <form class="ui form">
            <div class="field">
              <div class="ui fluid selection dropdown" id="data-grabber-menu">
                <i class="dropdown icon"></i>
                <div class="default text">None</div>
                <div class="menu">
                  <div class="item" data-value="none">None</div>
                </div>
              </div>
            </div>
            <!-- basically depending on the selected data source, the below sections will get updated -->
            <div id="data-grabber-ui-area">

            </div>
          </form>
        </div>
        <div class="ui segment">
          <h2 class="ui dividing header">Stats Source</h2>
          <div class="ui info message">
            <div class="content">
              <p>
                Select a stat database or API to pull from to enable the use of the
                overlays found in the Stats tab.
              </p>
            </div>
          </div>
          <form class="ui form">
            <!--<div class="fields">
              <div class="sixteen wide field">
                <label>Replay Folder Location</label>
                <div class="ui input">
                  <input type="text" id="set-replay-folder" disabled>
                  <div class="ui right attached button browse" id="set-replay-folder-button">Browse</div>
                </div>
              </div>
            </div>-->
            <div class="field">
              <label>Active Stat Source</label>
              <div class="ui fluid selection dropdown" id="data-source-menu">
                <i class="dropdown icon"></i>
                <div class="default text">No Stat Source</div>
                <div class="menu">
                  <div class="item" data-value="0">No Stat Source</div>
                  <div class="item" data-value="sots">Stats of the Storm</div>
                </div>
              </div>
            </div>
            <div class="data-source-options" data-source="sots">
              <div class="fields">
                <div class="seven wide disabled field">
                  <label>Database Location</label>
                  <input type="text" name="sots-db-location" id="sots-db-location">
                </div>
                <div class="three wide field">
                  <label>Set Database Location</label>
                  <div class="ui fluid labeled icon button" id="sots-db-find">
                    <i class="open folder icon"></i>
                    Browse
                  </div>
                </div>
                <div class="three wide field">
                  <label>Load Data</label>
                  <div class="ui fluid green button" id="sots-db-load">Load Data</div>
                </div>
                <div class="three wide field">
                  <label>Collection</label>
                  <div class="ui fluid selection dropdown" id="sots-db-collection">
                    <i class="dropdown icon"></i>
                    <div class="default text">All Matches</div>
                    <div class="menu">
                      <!-- populated after DB load -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="contained basic segment ui tab" data-tab="theme-override">
        <div class="ui segment">
          <h2 class="ui dividing header">Theme Overrides</h2>
          <div class="ui info message">
            <div class="content">
              <p>
                This panel lets you assign a theme to an individual overlay source. These
                settings will override the currently selected theme.
              </p>
            </div>
          </div>
          <div class="ui grid">
            <div class="eight wide column">
              <div class="ui fluid blue button" id="theme-override-default">Restore Default</div>
            </div>
            <div class="eight wide column">
              <div class="ui fluid green button set-theme-button" id="theme-override-set">Set Overrides</div>
            </div>
          </div>
          <div class="ui grid" id="theme-override-list">
          </div>
        </div>
      </div>
      <div class="contained basic segment ui tab" data-tab="status-overlays">
        <div class="ui segment">
          <h2 class="ui dividing header">Active Overlays</h2>
          <table class="ui table" id="overlay-table">
            <thead>
              <tr>
                <th>Overlay Name</th>
                <th>Socket ID</th>
              </tr>
            </thead>
            <tbody>

            </tbody>
          </table>
        </div>
      </div>
      <div class="contained basic segment ui tab" data-tab="status-keybinds">
        <div class="ui segment">
          <h2 class="ui dividing header">Keybinds</h2>
          <div class="ui message">
            <div class="content">
              <p>
                You can reassign the listed app functions to arbitrary key combinations.
                The keybind is a string corresponding to an
                <a href="https://electronjs.org/docs/api/accelerator">Electron Accelerator</a>.
                Note that these keybinds are global (window does not need focus) and will not work
                if they conflict with other global keybindings.
              </p>
            </div>
          </div>
          <div class="ui grid">
            <div class="eight wide column">
              <div class="ui fluid blue button" id="restore-default-keybinds-button">Restore Defaults</div>
            </div>
            <div class="eight wide column">
              <div class="ui fluid green button" id="update-keybinds-button">Set Keybinds</div>
            </div>
          </div>
          <div class="ui grid" id="keybind-inputs">
          </div>
        </div>
      </div>
    </div>
    <div id="message-container"></div>
    <div class="ui modal" id="download-theme-modal">
      <div class="header">Download Theme</div>
      <div class="content">
        <p>
          Download a theme from a url. The downloaded theme will be placed in a folder inside the currently
          specified theme folder. Downloaded themes are expected to be a ZIP containing the theme.json file.
          <strong>If a theme with the same name already exists, it will be overwritten.</strong>
        </p>
        <div class="ui fluid labeled input">
          <div class="ui label">
            URL
          </div>
          <input type="text" name="theme-download-url" id="theme-download-url">
        </div>
        <div class="ui icon message">
          <i class="notched circle loading icon"></i>
          <div class="content">
            <div class="header">Downloading Theme...</div>
            <p>[Status]</p>
          </div>
        </div>
        <div class="ui fluid green done button">
          OK
        </div>
      </div>
      <div class="actions">
        <div class="ui green approve button">Download</div>
        <div class="ui red cancel button">Cancel</div>
      </div>
    </div>
    <div class="ui basic modal" id="quit-confirm">
      <div class="header">Are you sure you want to quit?</div>
      <div class="actions">
        <div class="ui approve button">Yes</div>
        <div class="ui cancel button">No</div>
      </div>
    </div>
  </body>
</html>
